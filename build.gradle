plugins {
    id "org.jetbrains.kotlin.jvm" version "1.3.72"
}

repositories {
    clear()
    jcenter()
    mavenCentral()
}

defaultTasks 'clean', 'build', 'jacocoTestReport'

subprojects {
    group = 'com.example'

    repositories {
        clear()
        jcenter()
        mavenCentral()
    }

    apply from: "$rootDir/dependencies.gradle"

    apply plugin: 'kotlin'

    dependencies {
        implementation libs.kotlin,
                libs.slf4j

        testImplementation libs.test.kotest,
                libs.test.kotestAssertions,
                libs.test.kotestProperty,
                libs.test.mockk

        testRuntimeOnly libs.logback
    }

    jar {
        archiveBaseName = 'skeleton'
        archiveVersion = '1.0.0'
    }

    ext {
        sourceCompatibility = 1.8
        targetCompatibility = 1.8
    }

    compileKotlin {
        kotlinOptions.jvmTarget = "1.8"
    }

    compileTestKotlin {
        kotlinOptions.jvmTarget = "1.8"
    }

    test {
        useJUnitPlatform()
    }
}
